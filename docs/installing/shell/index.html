<!DOCTYPE html>
<html>
  <head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>MacPorts and the Shell</title>

  
  
  <link rel="stylesheet" href="https://constantin-p.github.io/macports-site/css/homepage.css">
  <link rel="stylesheet" href="https://constantin-p.github.io/macports-site/css/main.css">
</head>

  <body class="">
    
    

  




<header class="dark">
  <nav class="container">

    <a class="brand" href="https://constantin-p.github.io/macports-site/" title="The MacPorts Project">
      
        <img src="https://constantin-p.github.io/macports-site/assets/logo-inverse.svg" height="22" alt="Mac Ports">
      
    </a>

    <label for="menu-toggle">Menu</label>
    <input type="checkbox" id="menu-toggle">
    <ul>
      
      
      
        <li class="active">
          
            <a href="/macports-site/docs/">Documentation</a>
          
        </li>
      
        <li class="">
          
            <a href="https://www.macports.org/ports.php">Available ports</a>
          
        </li>
      
        <li class="has-sublist ">
          
            <a role="button" tabindex="0">Support</a>
            <div class="sublist">
              <ul class="container">
                
                  <li class="">
                    <a href="https://guide.macports.org/#project.tickets">Bug Reporting</a>
                  </li>
                
                  <li class="">
                    <a href="/macports-site/support/contact-us/">Contact Us</a>
                  </li>
                
                  <li class="">
                    <a href="https://trac.macports.org/wiki/MacPortsDevelopers">Team</a>
                  </li>
                
                  <li class="">
                    <a href="https://trac.macports.org/wiki/FAQ">FAQ</a>
                  </li>
                
              </ul>
            </div>
          
        </li>
      
        <li class="">
          
            <a href="/macports-site/news/">News</a>
          
        </li>
      
    </ul>
  </nav>
</header>


  <main>
    <div class="container">
      <div class="columns">
        <nav class="sidebar">
          <ul class="nav-chapters">

  
  

    
    

    
      <li>
        <a href="#macports-site.docs.installing.shell.postflight">The Postflight Script</a>
      </li>
    
  

    
    

    
      <li>
        <a href="#macports-site.docs.installing.shell.verifyprofile">Verify the Configuration File</a>
      </li>
    
  

    
    

    
      <li>
        <a href="#macports-site.docs.installing.shell.editorvar">Optional Editor Variables</a>
      </li>
    
  
  
</ul>
        </nav>

        <div class="content">
          <div class="doc-chapters">

  
  

    
    

    <a href="#macports-site.docs.installing.shell.postflight" class="h1">
      <h1>The Postflight Script</h1>
      <span class="anchor-target" id="macports-site.docs.installing.shell.postflight"></span>
    </a>

    <p>The postflight script automatically sets the <code>PATH</code> variable, and optionally the <code>MANPATH</code> and <code>DISPLAY</code> variables according to the rules described below. If a current shell configuration file exists at installation time it is renamed to “mpsaved_$timestamp”. Those i<a href="https://guide.macports.org/#installing.macports.source">nstalling MacPorts from source code</a> must modify their environment manually using the rules as a guide.</p>

<ul>
<li><p>Required: <code>PATH</code> variable</p>

<p>This variable is set by the postflight script to prepend the MacPorts executable paths to the current path as shown. This puts the MacPorts paths at the front of <code>PATH</code> so that the MacPorts binaries will take precedence over vendor-supplied binaries.
<pre class="docs-shell-content"><code>export PATH=/opt/local/bin:/opt/local/sbin:$PATH</code></pre></p></li>
</ul>

<blockquote>
<p>The user environment&rsquo;s <code>$PATH</code> is not in effect while ports are being installed, because the <code>$PATH</code> is scrubbed before ports are installed, and restored afterwards. To change the search path for locating system executables (rsync, tar, etc.) during port installation, see the <a href="https://guide.macports.org/#internals.configuration-files.macports-conf">macports.conf</a> file variable binpath. But changing this variable is for advanced users only, and is not generally needed or recommended.</p>
</blockquote>

<ul>
<li><p>Optional: <code>MANPATH</code> variable</p>

<p>Condition: If prior to MacPorts installation a <code>MANPATH</code> variable exists in a current <code class="docs-path">.profile</code> that contains neither the value <code class="docs-path">${prefix}/share/man</code>, nor any empty items separated by a colon, the postflight script sets the <code>MANPATH</code> variable as shown below. Otherwise, the <code>MANPATH</code> variable is omitted.</p></li>

<li><p>Optional: <code>DISPLAY</code> variable</p>

<p>Condition: If installing on a Mac OS X version earlier than 10.5 (Leopard), and if a shell configuration file exists at time of MacPorts installation without a <code>DISPLAY</code> variable, the postflight script sets a <code>DISPLAY</code> variable as shown below. The <code>DISPLAY</code> variable is always omitted on Mac OS X 10.5 or higher.
<pre class="docs-shell-content"><code>export DISPLAY=:0.0</code></pre></p></li>
</ul>

    
  

    
    

    <a href="#macports-site.docs.installing.shell.verifyprofile" class="h1">
      <h1>Verify the Configuration File</h1>
      <span class="anchor-target" id="macports-site.docs.installing.shell.verifyprofile"></span>
    </a>

    <p>To verify that the file containing the MacPorts variables is in effect, type <code class="docs-command">env</code> in the terminal to verify the current environment settings after the file has been created. Example output for <code class="docs-command">env</code> is shown below.</p>

<blockquote>
<p>Changes to shell configuration files do not take effect until a new terminal session is opened.</p>
</blockquote>

<pre class="docs-shell-out"><code>MANPATH=
TERM_PROGRAM=Apple_Terminal
TERM=xterm-color
SHELL=/bin/bash
TERM_PROGRAM_VERSION=237
USER=joebob
__CF_USER_TEXT_ENCODING=0x1FC:0:0
PATH=/opt/local/bin:/opt/local/sbin:/bin:/sbin:/usr/bin:/usr/sbin
PWD=/Users/joebob
EDITOR=/usr/bin/pico
SHLVL=1
HOME=/Users/joebob
LOGNAME=joebob
DISPLAY=:0.0
SECURITYSESSIONID=b0cea0
_=/usr/bin/env
</code></pre>


    
  

    
    

    <a href="#macports-site.docs.installing.shell.editorvar" class="h1">
      <h1>Optional Editor Variables</h1>
      <span class="anchor-target" id="macports-site.docs.installing.shell.editorvar"></span>
    </a>

    <p>You can set an environment variable in order to use your favorite text editor with the <code class="docs-command">port</code> edit command.</p>

<p>MacPorts will check <code>MP_EDITOR</code>, <code>VISUAL</code> and <code>EDITOR</code> in this order, allowing you to either use a default editor shared with other programs (<code>VISUAL</code> and <code>EDITOR</code>) or a MacPorts-specific one (`MP_EDITOR).</p>

<p>For example, to use the nano editor, add this line to your bash config:</p>

<pre class="docs-shell-content"><code>export EDITOR=/usr/bin/nano</code></pre>

<p>To use the user-friendly GUI editor <a href="https://www.barebones.com/products/bbedit/">BBEdit</a> (installation required), add this line:</p>

<pre class="docs-shell-content"><code>export EDITOR=/Applications/BBEdit.app/Contents/Helpers/bbedit_tool</code></pre>

<p>To keep a command-line text editor as default while using BBEdit with portfiles, add this:</p>

<p><pre class="docs-shell-content"><code>export EDITOR=/usr/bin/vi</code></pre>
<pre class="docs-shell-content"><code>export MP_EDITOR=/Applications/BBEdit.app/Contents/Helpers/bbedit_tool</code></pre></p>

    
  

</div>

        </div>
      </div>
    </div>
  </main>


  <footer>
  <div class="container">

    <section class="links">
      <a href="https://github.com/macports/">Git Repository</a>
      <a href="https://trac.macports.org/wiki">MacPorts Wiki</a>
      <a href="https://trac.macports.org/wiki/MacPortsDevelopers">MacPorts Team</a>
    </section>
    <section>
      <div class="legal-copyright">
        Copyright © 2002–2019 <a href="https://www.macports.org/">The MacPorts Project</a>. All rights reserved.
      </div>

      <div class="link">
        Content delivery accelerated by <a href="https://www.stackpath.com/">StackPath</a>.
      </div>
    </section>
  </div>
</footer>



  </body>
</html>